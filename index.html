<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 èŒåœºæœ¬å‘½äººæ ¼ç¡®è¯ŠæŠ¥å‘Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background: #0b1120; color: #e2e8f0; }
        .glass-panel { background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        /* æµ·æŠ¥èƒŒæ™¯ä¿®æ­£ï¼Œé˜²æ­¢æˆªå›¾å˜é»‘ */
        #poster-container { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        .option-card:active { transform: scale(0.98); background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden bg-slate-900">
    
    <header class="relative z-10 h-14 flex items-center justify-between px-6 border-b border-white/5 bg-slate-900/50">
        <div class="font-black text-lg text-blue-500 tracking-wider">MIND_LAB</div>
        <div class="text-xs text-slate-500">v5.0 Viral</div>
    </header>

    <main class="relative z-10 flex-1 flex flex-col items-center justify-center p-4">
        
        <div id="start-screen" class="text-center space-y-8 max-w-lg">
            <div class="inline-block px-3 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold mb-2">
                âš ï¸ è­¦å‘Šï¼šç»“æœè¿‡äºçœŸå®
            </div>
            <h1 class="text-5xl font-black text-white leading-tight">æµ‹æµ‹ä½ çš„<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">èŒåœºå‡ºå‚è®¾ç½®</span></h1>
            <p class="text-slate-400 text-sm md:text-base">Gallup ä¼˜åŠ¿ç®—æ³• Ã— MBTI å†…æ ¸<br>å« 25 é“çµé­‚æ‹·é—®ï¼Œè¯·æ”¾å¼ƒè¿™ä¹Ÿæ˜¯ä¸€ç§é€‰é¡¹</p>
            <button onclick="startQuiz()" class="px-10 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold shadow-lg shadow-blue-600/30 transition-all transform hover:scale-105">ç«‹å³ç¡®è¯Š</button>
        </div>

        <div id="quiz-screen" class="hidden w-full max-w-xl h-[75vh] flex flex-col glass-panel rounded-2xl overflow-hidden">
            <div class="w-full bg-slate-800 h-1.5"><div id="progress-bar" class="bg-gradient-to-r from-blue-400 to-blue-600 h-full transition-all duration-300" style="width: 0%"></div></div>
            
            <div class="flex-1 overflow-y-auto p-6 md:p-10 no-scrollbar">
                <div class="flex justify-between items-end mb-6">
                    <span class="text-4xl font-black text-white/10">Q<span id="q-index">1</span></span>
                    <span class="text-xs text-blue-400 font-mono tracking-widest">SCENARIO</span>
                </div>
                
                <h2 id="q-text" class="text-xl md:text-2xl font-bold text-white mb-10 leading-relaxed">é¢˜ç›®åŠ è½½ä¸­...</h2>

                <div class="space-y-4">
                    <button onclick="selectOption('A')" class="option-card w-full p-5 text-left border border-white/10 rounded-xl hover:border-blue-500/50 hover:bg-white/5 text-slate-200 transition-all group">
                        <span class="text-xs text-slate-500 font-bold block mb-1 group-hover:text-blue-400">OPTION A</span>
                        <span id="text-a" class="font-medium">...</span>
                    </button>
                    <button onclick="selectOption('B')" class="option-card w-full p-5 text-left border border-white/10 rounded-xl hover:border-purple-500/50 hover:bg-white/5 text-slate-200 transition-all group">
                        <span class="text-xs text-slate-500 font-bold block mb-1 group-hover:text-purple-400">OPTION B</span>
                        <span id="text-b" class="font-medium">...</span>
                    </button>
                </div>
            </div>
        </div>

        <div id="result-screen" class="hidden absolute inset-0 bg-slate-900 z-50 overflow-y-auto">
            <div class="min-h-screen flex items-center justify-center p-4">
                
                <div id="poster-node" class="relative w-full max-w-md bg-slate-900 rounded-2xl overflow-hidden shadow-2xl border border-white/10">
                    
                    <div id="poster-container" class="p-8 pb-10 relative">
                        <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl pointer-events-none"></div>
                        <div class="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl pointer-events-none"></div>

                        <div class="flex gap-2 mb-6">
                            <span id="res-mbti" class="px-2 py-1 bg-white/10 text-white text-xs font-bold rounded border border-white/10">...</span>
                            <span id="res-zodiac" class="px-2 py-1 bg-white/10 text-yellow-300 text-xs font-bold rounded border border-white/10">...</span>
                        </div>

                        <h1 class="text-4xl font-black text-white mb-2 tracking-tight"><span id="res-title">...</span></h1>
                        <p id="res-subtitle" class="text-lg text-blue-400 mb-8 font-medium">...</p>

                        <div class="w-full aspect-square max-w-[220px] mx-auto mb-8 relative">
                            <canvas id="radarChart"></canvas>
                        </div>

                        <div class="bg-white/5 p-5 rounded-xl border-l-4 border-blue-500 mb-8 backdrop-blur-sm">
                            <p id="res-quote" class="text-white text-sm italic leading-relaxed">...</p>
                        </div>

                        <div class="flex items-center justify-between border-t border-white/10 pt-5">
                            <div class="text-left">
                                <div class="text-sm font-bold text-white">é•¿æŒ‰æ‰«ç ç¡®è¯Š</div>
                                <div class="text-xs text-slate-400 mt-1">2026 èŒåœºæœ¬å‘½äººæ ¼</div>
                            </div>
                            <div id="qrcode" class="p-1 bg-white rounded-lg shadow-lg"></div>
                        </div>
                    </div>

                    <div id="save-mask" class="absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-50 hidden text-center p-6 backdrop-blur-md">
                        <img id="final-image" src="" class="w-full rounded-xl shadow-2xl mb-6 border border-white/20">
                        <p class="text-white font-bold text-lg animate-bounce">ğŸ‘† é•¿æŒ‰ä¸Šæ–¹å›¾ç‰‡ä¿å­˜ ğŸ‘†</p>
                        <p class="text-slate-400 text-sm mt-2">å‘æœ‹å‹åœˆï¼Œçœ‹çœ‹è°å’Œä½ æ˜¯å¤©é€‰æ­æ¡£</p>
                        <button onclick="closeMask()" class="mt-8 px-8 py-3 bg-white/10 hover:bg-white/20 text-white rounded-full text-sm font-bold transition-all">å…³é—­é¢„è§ˆ</button>
                    </div>

                </div>
            </div>

            <div class="fixed bottom-6 left-0 right-0 flex justify-center gap-4 z-40 px-4">
                <button onclick="location.reload()" class="flex-1 max-w-[140px] px-4 py-3 bg-slate-800 text-white rounded-xl font-bold shadow-lg border border-white/10">é‡æµ‹ä¸€æ¬¡</button>
                <button onclick="generatePoster()" class="flex-1 max-w-[180px] px-4 py-3 bg-blue-600 text-white rounded-xl font-bold shadow-lg shadow-blue-600/40">ç”Ÿæˆåˆ†äº«æµ·æŠ¥</button>
            </div>
        </div>
    </main>

    <script>
        // ----------------------------------------------------
        // 1. å®Œæ•´é¢˜åº“ (25é¢˜)
        // T=Thinking(æˆ˜ç•¥), E=Executing(æ‰§è¡Œ), I=Influencing(ç¤¾ç‰›), R=Relating(å…±æƒ…)
        // ----------------------------------------------------
        const questions = [
            { q: "è€æ¿ç”»çš„å¤§é¥¼ï¼Œä½ ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ", a: {t: "æ‰“å¼€Excelç®—ä¸€ä¸‹è½åœ°æ¦‚ç‡ï¼Œå‘ç°æ˜¯0", v: "T"}, b: {t: "è™½ç„¶çŸ¥é“æ˜¯é¥¼ï¼Œä½†è¿˜æ˜¯é…åˆè¡¨æ¼”é¼“ä¸ªæŒ", v: "R"} },
            { q: "åŒäº‹åœ¨ç¾¤é‡Œç”©é”…ç»™ä½ ï¼Œä½ ä¼šï¼Ÿ", a: {t: "æˆªå›¾ç•™è¯ï¼Œåˆ—å‡ºæ—¶é—´çº¿ï¼Œé€»è¾‘ç¢¾å‹", v: "T"}, b: {t: "ç§èŠä»–ï¼š'å“¥ï¼Œè¿™ä¹ˆæå¤§å®¶é¢å­ä¸å¥½çœ‹å§'", v: "R"} },
            { q: "è¯„ä»·ä¸€ä¸ªæ–¹æ¡ˆçš„å¥½åæ ‡å‡†ï¼Ÿ", a: {t: "é€»è¾‘é—­ç¯ï¼ŒROIï¼ˆæŠ•èµ„å›æŠ¥ç‡ï¼‰é«˜", v: "T"}, b: {t: "å›¢é˜Ÿéƒ½è®¤å¯ï¼Œå¤§å®¶æ‰§è¡Œèµ·æ¥ä¸éš¾å—", v: "R"} },
            { q: "å¦‚æœå¿…é¡»è£æ‰ä¸€åè€å¥½äººå‘˜å·¥ã€‚", a: {t: "æ…ˆä¸æŒå…µï¼Œä¸ºäº†å›¢é˜Ÿæ•ˆç‡å¿…é¡»èµ°", v: "T"}, b: {t: "æå…¶ç—›è‹¦ï¼Œç”šè‡³æƒ³å¸®ä»–å†äº‰å–ä¸€ä¸‹", v: "R"} },
            { q: "ä½ æ›´å—ä¸äº†å“ªç§é¢†å¯¼ï¼Ÿ", a: {t: "é€»è¾‘æ··ä¹±ï¼Œæœä»¤å¤•æ”¹çš„", v: "T"}, b: {t: "å†·è¡€æ— æƒ…ï¼ŒæŠŠäººå½“è€—æç”¨çš„", v: "R"} },
            { q: "å‘¨äº”ä¸´ä¸‹ç­çªç„¶æ¥äº†ä¸ªæ€¥æ´»ã€‚", a: {t: "å…³ä¸Šé—¨ï¼Œä¸¤å°æ—¶æé€Ÿæå®šç„¶åä¸‹ç­", v: "E"}, b: {t: "æ‹‰ä¸ªä¼šï¼ŒæŠŠå¤§å®¶æ‘‡æ¥ä¸€èµ·å¤´è„‘é£æš´", v: "I"} },
            { q: "ä½ æ˜¯å“ªç§å·¥ä½œçŠ¶æ€ï¼Ÿ", a: {t: "äººç‹ è¯ä¸å¤šï¼Œé”®ç›˜æ•²å†’çƒŸ", v: "E"}, b: {t: "èŒ¶æ°´é—´åŒ…æ‰“å¬ï¼Œå…¬å¸å…«å¦é›†æ•£åœ°", v: "I"} },
            { q: "é¢å¯¹ä¸€ä¸ªå…¨æ–°çš„å›°éš¾ä»»åŠ¡ã€‚", a: {t: "å…ˆåˆ«åºŸè¯ï¼Œå¹²äº†å†è¯´ï¼Œåœ¨åšä¸­é”™", v: "E"}, b: {t: "å…ˆæ‰¾èµ„æºï¼Œçœ‹çœ‹è°èƒ½å¸®æˆ‘æå®š", v: "I"} },
            { q: "æ¨é”€ä½ çš„æ–¹æ¡ˆæ—¶ã€‚", a: {t: "åˆ—å‡º1234ç‚¹æ‰§è¡Œç»†èŠ‚ï¼Œè¯æ˜å¯è¡Œæ€§", v: "E"}, b: {t: "æç»˜å®å¤§æ„¿æ™¯ï¼Œè®©å¤§å®¶çƒ­è¡€æ²¸è…¾", v: "I"} },
            { q: "å…³äºå¼€ä¼šã€‚", a: {t: "èƒ½ä¸å¼€å°±ä¸å¼€ï¼Œå‘é‚®ä»¶è§£å†³", v: "E"}, b: {t: "å¿…é¡»å¼€ä¼šï¼Œè§é¢èŠæ‰æœ‰ç«èŠ±", v: "I"} },
            { q: "ä½ æ›´å–œæ¬¢å“ªç§å·¥ä½œæ–‡æ¡£ï¼Ÿ", a: {t: "åªæœ‰å¹²è´§å’Œæ•°æ®ç»“è®ºçš„", v: "E"}, b: {t: "æœ‰æ–¹æ³•è®ºå’Œåº•å±‚é€»è¾‘æ¶æ„çš„", v: "T"} },
            { q: "å¯¹äºæœªæ¥çš„èŒä¸šè§„åˆ’ã€‚", a: {t: "çœ‹å¥½çœ¼å‰è¿™ä¸€æ­¥ï¼Œå…ˆæŠŠé’±èµšäº†", v: "E"}, b: {t: "å“ªæ€•ç°åœ¨äºç‚¹ï¼Œä¹Ÿè¦èµŒä¸€ä¸ªæœªæ¥é£å£", v: "T"} },
            { q: "å…¬å¸å¹´ä¼šä¸Šï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ", a: {t: "åœ¨è§’è½é‡Œé»˜é»˜å¹²é¥­ï¼Œå¸Œæœ›èƒ½æ—©é€€", v: "R"}, b: {t: "æŠ¢éº¦å…‹é£ï¼Œç”šè‡³æƒ³ä¸Šå»æ•´ä¸€æ®µæ‰è‰º", v: "I"} },
            { q: "é‡åˆ°éš¾æçš„ç”²æ–¹çˆ¸çˆ¸ã€‚", a: {t: "æƒ…ç»ªç¨³å®šï¼Œåªè¦é’±åˆ°ä½å•¥å§¿åŠ¿éƒ½è¡Œ", v: "R"}, b: {t: "å‡­å€Ÿä¸‰å¯¸ä¸çƒ‚ä¹‹èˆŒï¼ŒæŠŠä»–å¿½æ‚ ç˜¸äº†", v: "I"} },
            { q: "å¦‚æœä½ çš„ç”µè„‘çªç„¶è“å±ï¼Œæ–‡ä»¶æ²¡å­˜ã€‚", a: {t: "æ·±å¸ä¸€å£æ°”ï¼Œå‡­è®°å¿†é‡å†™ (ç‹ äºº)", v: "E"}, b: {t: "å‘æœ‹å‹åœˆå´©æºƒï¼š'æ°´é€†é€€æ•£ï¼' (æ±‚å®‰æ…°)", v: "I"} },
            { q: "ä½ è§‰å¾—å·¥ä½œçš„æ„ä¹‰æ˜¯ï¼Ÿ", a: {t: "å‡ºå–æ—¶é—´æ¢å–é‡‘é’±çš„ç­‰ä»·äº¤æ¢", v: "T"}, b: {t: "è·å¾—æˆå°±æ„Ÿå’Œè¢«ä»–äººéœ€è¦", v: "R"} },
            { q: "å‘¨æœ«è¦åŠ ç­ï¼Œä½ ä¼šé€‰æ‹©ï¼Ÿ", a: {t: "åœ¨å®¶è¿œç¨‹ï¼Œç©¿ç€ç¡è¡£æ•ˆç‡æœ€é«˜", v: "E"}, b: {t: "å»å…¬å¸ï¼Œé¡ºä¾¿çº¦åŒäº‹åƒä¸ªæ™šé¥­", v: "R"} },
            { q: "ä½ çš„åŠå…¬æ¡ŒçŠ¶æ€ï¼Ÿ", a: {t: "æç®€ï¼Œåªæœ‰ç”µè„‘å’Œæ°´æ¯", v: "E"}, b: {t: "å †æ»¡äº†æ‰‹åŠã€é›¶é£Ÿå’Œè§£å‹ç©å…·", v: "I"} },
            { q: "è¢«é¢†å¯¼å½“ä¼—è¡¨æ‰¬æ—¶ã€‚", a: {t: "é¢æ— è¡¨æƒ…ï¼Œå†…å¿ƒæ¯«æ— æ³¢æ¾œ", v: "T"}, b: {t: "æœ‰ç‚¹ä¸å¥½æ„æ€ï¼Œä½†å¿ƒé‡Œç¾æ»‹æ»‹", v: "R"} },
            { q: "å¦‚æœå¯ä»¥ï¼Œä½ æƒ³æŠŠè°å¼€é™¤ï¼Ÿ", a: {t: "é‚£ä¸ªåªä¼šå†™PPTä¸å¹²æ´»çš„", v: "E"}, b: {t: "é‚£ä¸ªæ€»æ˜¯åˆ¶é€ ç„¦è™‘å’Œè´Ÿèƒ½é‡çš„", v: "I"} },
            { q: "ä½ ç°åœ¨çš„ç²¾ç¥çŠ¶æ€æ¥è¿‘ï¼Ÿ", a: {t: "å¿ƒå¦‚æ­¢æ°´ï¼Œç”šè‡³æƒ³å»å‡ºå®¶", v: "T"}, b: {t: "é—´æ­‡æ€§è¸Œèº‡æ»¡å¿—ï¼ŒæŒç»­æ€§æ··åƒç­‰æ­»", v: "R"} },
            { q: "åŒäº‹é—®ä½ è¿™è¡Œä»£ç /æ–¹æ¡ˆæ€ä¹ˆå†™ã€‚", a: {t: "ç›´æ¥ä¸¢ç»™ä»–ä¸€ä¸ªæ–‡æ¡£é“¾æ¥è‡ªå·±çœ‹", v: "T"}, b: {t: "æ‰‹æŠŠæ‰‹æ•™ä»–ï¼Œç”šè‡³å¸®ä»–å†™äº†", v: "R"} },
            { q: "é¢å¯¹ä¸åˆç†çš„KPIã€‚", a: {t: "ç†æ®æœäº‰ï¼Œè¯æ˜è¿™æ˜¯ä¸åˆç†çš„", v: "T"}, b: {t: "è¡¨é¢ç­”åº”ï¼ŒèƒŒåœ°é‡Œå¼€å§‹æŠ•ç®€å†", v: "E"} },
            { q: "ä½ æ›´å¸Œæœ›æ‹¥æœ‰çš„è¶…èƒ½åŠ›ï¼Ÿ", a: {t: "è¿‡ç›®ä¸å¿˜ï¼Œé€»è¾‘å°ç¥", v: "T"}, b: {t: "äººè§äººçˆ±ï¼Œæå®šæ‰€æœ‰å¤§ä½¬", v: "I"} },
            { q: "æœ€åï¼Œä½ è§‰å¾—è‡ªå·±æ˜¯ï¼Ÿ", a: {t: "å¤©é€‰æ‰“å·¥äººï¼Œè«å¾—æ„Ÿæƒ…", v: "E"}, b: {t: "æœ‰è¶£çš„çµé­‚ï¼Œè¢«è¿«è°‹ç”Ÿ", v: "I"} }
        ];

        // ----------------------------------------------------
        // 2. å®Œæ•´ç»“æœåº“ (6ç§æ ¸å¿ƒäººæ ¼)
        // ----------------------------------------------------
        const profiles = {
            "T_E": { 
                title: "é«˜å†·æ“ç›˜æ‰‹", 
                subtitle: "æˆ˜ç•¥å¤§è„‘ Ã— æš´åŠ›æ‰§è¡Œ", 
                mbti: "INTJ Â· ç»å‘½æ¯’å¸ˆ", 
                zodiac: "èŒåœºæ‘©ç¾¯åº§", 
                quote: "â€œæ™ºè€…ä¸å…¥çˆ±æ²³ï¼Œå»ºè®¾ç¾ä¸½ç¥–å›½ã€‚åˆ«è·Ÿæˆ‘è°ˆæ„Ÿæƒ…ï¼Œç›´æ¥çœ‹æ•°æ®ã€‚â€" 
            },
            "T_I": { 
                title: "ç”»é¥¼è‰ºæœ¯å®¶", 
                subtitle: "æˆ˜ç•¥å¤§è„‘ Ã— ç¤¾äº¤ç‰›é€¼", 
                mbti: "ENTJ Â· éœ¸é“æ€»è£", 
                zodiac: "èŒåœºç‹®å­åº§", 
                quote: "â€œæˆ‘ä¸è¦ä½ è§‰å¾—ï¼Œæˆ‘è¦æˆ‘è§‰å¾—ã€‚å¬æˆ‘çš„ï¼Œè¿™äº‹å„¿èƒ½æˆã€‚â€" 
            },
            "T_R": { 
                title: "å¹•åè¯»å¿ƒå¸ˆ", 
                subtitle: "æˆ˜ç•¥å¤§è„‘ Ã— æƒ…æ„Ÿé“¾æ¥", 
                mbti: "INFJ Â· ç²¾ç¥å¯¼å¸ˆ", 
                zodiac: "èŒåœºå¤©èåº§", 
                quote: "â€œæˆ‘é™é™åœ°çœ‹ç€ä½ ä»¬è¡¨æ¼”ï¼Œå¹¶é¢„åˆ¤äº†ä½ ä»¬çš„é¢„åˆ¤ã€‚â€" 
            },
            "E_I": { 
                title: "äººå½¢æ¨åœŸæœº", 
                subtitle: "æš´åŠ›æ‰§è¡Œ Ã— ç¤¾äº¤ç‰›é€¼", 
                mbti: "ESTP Â· åå°”è¡—ä¹‹ç‹¼", 
                zodiac: "èŒåœºç™½ç¾Šåº§", 
                quote: "â€œå°‘æ•´é‚£äº›è™šå¤´å·´è„‘çš„ï¼Œå¹²å°±å®Œäº†ï¼ä»Šæ™šå…¨åœºç”±èµµå…¬å­ä¹°å•ï¼â€" 
            },
            "E_R": { 
                title: "å…¨èƒ½å¤§ç®¡å®¶", 
                subtitle: "æš´åŠ›æ‰§è¡Œ Ã— æƒ…æ„Ÿé“¾æ¥", 
                mbti: "ISFJ Â· å®ˆæŠ¤å¤©ä½¿", 
                zodiac: "èŒåœºå·¨èŸ¹åº§", 
                quote: "â€œæ”¾ç€æˆ‘æ¥å§â€¦â€¦æ²¡äº‹ï¼Œæˆ‘ä¸ç´¯ã€‚ï¼ˆå†…å¿ƒï¼šæˆ‘å¤ªéš¾äº†ï¼‰â€" 
            },
            "I_R": { 
                title: "ç¤¾äº¤ç‚¼é‡‘æœ¯", 
                subtitle: "ç¤¾äº¤ç‰›é€¼ Ã— æƒ…æ„Ÿé“¾æ¥", 
                mbti: "ENFP Â· å¿«ä¹ä¿®å‹¾", 
                zodiac: "èŒåœºåŒå­åº§", 
                quote: "â€œä¸Šç­æ˜¯ä¸ºäº†äº”é™©ä¸€é‡‘ï¼Œä½†å¿«ä¹æ˜¯è‡ªå·±ç»™çš„ï¼æç‚¹ä¸‹åˆèŒ¶å—ï¼Ÿâ€" 
            }
        };

        // ----------------------------------------------------
        // 3. è¿è¡Œé€»è¾‘
        // ----------------------------------------------------
        let step = 0;
        let scores = { "T": 0, "E": 0, "I": 0, "R": 0 };
        let myChart = null; // å­˜å‚¨å›¾è¡¨å®ä¾‹ï¼Œé˜²æ­¢é‡å¤æ¸²æŸ“

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('quiz-screen').classList.add('flex');
            renderQ();
        }

        function renderQ() {
            if (step >= questions.length) { showResult(); return; }
            const q = questions[step];
            document.getElementById('q-index').innerText = step + 1;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('text-a').innerText = q.a.t;
            document.getElementById('text-b').innerText = q.b.t;
            document.getElementById('progress-bar').style.width = ((step + 1) / questions.length * 100) + '%';
        }

        function selectOption(choice) {
            const val = choice === 'A' ? questions[step].a.v : questions[step].b.v;
            scores[val]++;
            step++;
            renderQ();
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            // è®¡ç®—å¾—åˆ†æœ€é«˜çš„ä¸¤é¡¹
            const sorted = Object.entries(scores).sort((a,b) => b[1]-a[1]);
            let key = `${sorted[0][0]}_${sorted[1][0]}`;
            if(!profiles[key]) key = `${sorted[1][0]}_${sorted[0][0]}`;
            const res = profiles[key] || profiles["T_E"]; // å…œåº•

            // å¡«å……å†…å®¹
            document.getElementById('res-title').innerText = res.title;
            document.getElementById('res-subtitle').innerText = res.subtitle;
            document.getElementById('res-mbti').innerText = res.mbti;
            document.getElementById('res-zodiac').innerText = res.zodiac;
            document.getElementById('res-quote').innerText = res.quote;

            // æ¸²æŸ“å›¾è¡¨
            const ctx = document.getElementById('radarChart').getContext('2d');
            if(myChart) myChart.destroy(); // é”€æ¯æ—§å›¾è¡¨
            myChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['æˆ˜ç•¥', 'æ‰§è¡Œ', 'ç¤¾äº¤', 'å…±æƒ…'],
                    datasets: [{
                        data: [scores.T, scores.E, scores.I, scores.R],
                        backgroundColor: 'rgba(96, 165, 250, 0.5)',
                        borderColor: '#60a5fa',
                        borderWidth: 2,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#60a5fa'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: '#e2e8f0', font: { size: 12 } },
                            ticks: { display: false, backdropColor: 'transparent' }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });

            // ç”ŸæˆäºŒç»´ç 
            const currentUrl = window.location.href; 
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById("qrcode"), {
                text: currentUrl,
                width: 55,
                height: 55,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        }

        // --- æµ·æŠ¥ç”Ÿæˆé€»è¾‘ ---
        function generatePoster() {
            const dom = document.getElementById('poster-node');
            window.scrollTo(0,0);
            
            html2canvas(dom, {
                backgroundColor: null,
                scale: 2,
                useCORS: true
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                document.getElementById('final-image').src = imgData;
                document.getElementById('save-mask').classList.remove('hidden');
                document.getElementById('save-mask').classList.add('flex');
            });
        }

        function closeMask() {
            document.getElementById('save-mask').classList.add('hidden');
            document.getElementById('save-mask').classList.remove('flex');
        }
    </script>
</body>
</html>
